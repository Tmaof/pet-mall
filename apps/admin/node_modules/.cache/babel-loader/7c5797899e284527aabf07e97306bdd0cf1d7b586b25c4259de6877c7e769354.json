{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, resolveDirective as _resolveDirective, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"user-list-container\"\n};\nconst _hoisted_2 = {\n  class: \"head\"\n};\nconst _hoisted_3 = {\n  class: \"pagination-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_SvgIcon = _resolveComponent(\"SvgIcon\");\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_popconfirm = _resolveComponent(\"el-popconfirm\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _directive_permission = _resolveDirective(\"permission\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    shadow: \"never\"\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" 头部 \"), _createElementVNode(\"div\", _hoisted_2, [_withDirectives((_openBlock(), _createBlock(_component_el_button, {\n      type: \"primary\",\n      onClick: _cache[0] || (_cache[0] = $event => $setup.isShowDiaLog = true)\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('User.index.017834-0')), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    })), [[_directive_permission, 'excel-import']]), _createVNode(_component_el_button, {\n      type: \"success\",\n      onClick: $setup.exportExcelFile,\n      \"loading-icon\": \"Loading\",\n      loading: $setup.exportExLoading\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('User.index.017834-1')), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"loading\"])]), _createCommentVNode(\" 表格 \"), _createVNode(_component_el_table, {\n      data: $setup.userListInfo.list || [],\n      border: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        type: \"index\",\n        label: _ctx.$t('User.index.017834-2')\n      }, null, 8 /* PROPS */, [\"label\"]), _createVNode(_component_el_table_column, {\n        label: _ctx.$t('User.index.017834-3')\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_avatar, {\n          fit: \"contain\",\n          src: row.avatar\n        }, {\n          default: _withCtx(() => [_createVNode(_component_SvgIcon, {\n            icon: \"my-user\"\n          })]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"src\"])]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"label\"]), _createVNode(_component_el_table_column, {\n        label: _ctx.$t('User.index.017834-4')\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createTextVNode(_toDisplayString(row.username), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"label\"]), _createVNode(_component_el_table_column, {\n        label: _ctx.$t('User.index.017834-5')\n      }, {\n        default: _withCtx(({\n          row\n        }) => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(row.role, item => {\n          return _openBlock(), _createBlock(_component_el_tag, {\n            key: item.id\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(item.name), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"label\"]), _createVNode(_component_el_table_column, {\n        label: _ctx.$t('User.index.017834-6')\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createTextVNode(_toDisplayString(_ctx.$filters.dateFilter(row.openTime)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"label\"]), _createVNode(_component_el_table_column, {\n        label: _ctx.$t('User.index.017834-7')\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_withDirectives(_createVNode(_component_el_button, {\n          icon: \"Tools\",\n          type: \"primary\",\n          onClick: $event => $setup.assignRoles(row.id)\n        }, null, 8 /* PROPS */, [\"onClick\"]), [[_directive_permission, 'assign-role']]), _createVNode(_component_el_popconfirm, {\n          onConfirm: $event => $setup.deleteUser(row.id),\n          title: _ctx.$t('User.index.017834-8')\n        }, {\n          reference: _withCtx(() => [_withDirectives(_createVNode(_component_el_button, {\n            icon: \"DeleteFilled\",\n            type: \"danger\"\n          }, null, 512 /* NEED_PATCH */), [[_directive_permission, 'delete-user']])]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onConfirm\", \"title\"])]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"label\"])]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_pagination, {\n      total: $setup.userListInfo.total || 0,\n      \"page-size\": $setup.size,\n      \"page-sizes\": $setup.pageSizes,\n      modelValue: $setup.page,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.page = $event),\n      layout: \"total,sizes, prev, pager, next, jumper\",\n      onCurrentChange: $setup.onCurrentChange,\n      onSizeChange: $setup.onSizeChange\n    }, null, 8 /* PROPS */, [\"total\", \"page-size\", \"modelValue\"])]), _createCommentVNode(\" 对话框组件 \"), _createVNode($setup[\"AddUserDialog\"], {\n      modelValue: $setup.isShowDiaLog,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.isShowDiaLog = $event),\n      onComplete: _cache[3] || (_cache[3] = $event => $setup.getUserListInfo())\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode($setup[\"AssignRoles\"], {\n      modelValue: $setup.isShowAssignRoles,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.isShowAssignRoles = $event),\n      userId: $setup.currentUserId,\n      onComplete: _cache[5] || (_cache[5] = $event => $setup.getUserListInfo())\n    }, null, 8 /* PROPS */, [\"modelValue\", \"userId\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","shadow","default","_withCtx","_createCommentVNode","_createElementVNode","_hoisted_2","_createBlock","_component_el_button","type","onClick","_cache","$event","$setup","isShowDiaLog","_createTextVNode","_toDisplayString","_ctx","$t","_","exportExcelFile","loading","exportExLoading","_component_el_table","data","userListInfo","list","border","_component_el_table_column","label","row","_component_el_avatar","fit","src","avatar","_component_SvgIcon","icon","username","_Fragment","_renderList","role","item","_component_el_tag","key","id","name","$filters","dateFilter","openTime","assignRoles","_component_el_popconfirm","onConfirm","deleteUser","title","reference","_hoisted_3","_component_el_pagination","total","size","pageSizes","modelValue","page","layout","onCurrentChange","onSizeChange","onComplete","getUserListInfo","isShowAssignRoles","userId","currentUserId"],"sources":["D:\\myproject\\毕业设计\\pet-mall\\apps\\admin\\src\\views\\Acl\\User\\index.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-list-container\">\r\n    <el-card shadow=\"never\">\r\n      <!-- 头部 -->\r\n      <div class=\"head\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"isShowDiaLog = true\"\r\n          v-permission=\"'excel-import'\"\r\n          >{{ $t('User.index.017834-0') }}</el-button\r\n        >\r\n        <el-button\r\n          type=\"success\"\r\n          @click=\"exportExcelFile\"\r\n          loading-icon=\"Loading\"\r\n          :loading=\"exportExLoading\"\r\n          >{{ $t('User.index.017834-1') }}</el-button\r\n        >\r\n      </div>\r\n      <!-- 表格 -->\r\n      <el-table :data=\"userListInfo.list || []\" border>\r\n        <el-table-column type=\"index\" :label=\"$t('User.index.017834-2')\"></el-table-column>\r\n        <el-table-column :label=\"$t('User.index.017834-3')\" >\r\n          <template v-slot=\"{ row }\">\r\n            <el-avatar fit=\"contain\" :src=\"row.avatar\">\r\n              <SvgIcon icon=\"my-user\"></SvgIcon>\r\n            </el-avatar>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('User.index.017834-4')\" >\r\n          <template v-slot=\"{ row }\">\r\n            {{ row.username }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('User.index.017834-5')\" >\r\n          <template v-slot=\"{ row }\">\r\n            <el-tag v-for=\"item of row.role\" :key=\"item.id\">{{\r\n              item.name\r\n            }}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('User.index.017834-6')\" >\r\n          <template v-slot=\"{ row }\">\r\n            {{ $filters.dateFilter(row.openTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('User.index.017834-7')\" >\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              icon=\"Tools\"\r\n              type=\"primary\"\r\n              @click=\"assignRoles(row.id)\"\r\n              v-permission=\"'assign-role'\"\r\n            ></el-button>\r\n            <el-popconfirm @confirm=\"deleteUser(row.id)\" :title=\"$t('User.index.017834-8')\">\r\n              <template #reference>\r\n                <el-button\r\n                  icon=\"DeleteFilled\"\r\n                  type=\"danger\"\r\n                  v-permission=\"'delete-user'\"\r\n                ></el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"pagination-container\">\r\n        <el-pagination\r\n          :total=\"userListInfo.total || 0\"\r\n          :page-size=\"size\"\r\n          :page-sizes=\"pageSizes\"\r\n          v-model=\"page\"\r\n          layout=\"total,sizes, prev, pager, next, jumper\"\r\n          @current-change=\"onCurrentChange\"\r\n          @size-change=\"onSizeChange\"\r\n        />\r\n      </div>\r\n      <!-- 对话框组件 -->\r\n      <AddUserDialog\r\n        v-model=\"isShowDiaLog\"\r\n        @complete=\"getUserListInfo()\"\r\n      ></AddUserDialog>\r\n      <AssignRoles\r\n        v-model=\"isShowAssignRoles\"\r\n        :userId=\"currentUserId\"\r\n        @complete=\"getUserListInfo()\"\r\n      ></AssignRoles>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from 'vue'\r\nimport { getUserList, deleteUserById } from '@/api/user-manage'\r\nimport AddUserDialog from './components/AddUserDialog'\r\nimport exportExcel from './hooks/exportExcel'\r\nimport AssignRoles from './components/AssignRoles'\r\nconst userListInfo = ref([])\r\nconst page = ref(1)\r\nconst size = ref(5)\r\nconst pageSizes = [5, 10, 20, 30, 70, 100]\r\nconst isShowDiaLog = ref(false)\r\nconst exportExLoading = ref(false)\r\nconst currentUserId = ref()\r\nconst isShowAssignRoles = ref(false)\r\nfunction onCurrentChange(newPage) {\r\n  page.value = newPage\r\n  getUserListInfo()\r\n}\r\nfunction onSizeChange(newSize) {\r\n  size.value = newSize\r\n  getUserListInfo()\r\n}\r\n/**\r\n * 分页获取员工列表\r\n */\r\nasync function getUserListInfo() {\r\n  userListInfo.value = await getUserList(page.value, size.value)\r\n}\r\n/**\r\n * 删除员工\r\n */\r\nasync function deleteUser(id) {\r\n  await deleteUserById(id)\r\n  getUserListInfo()\r\n}\r\n/**\r\n * excel导出\r\n */\r\nasync function exportExcelFile() {\r\n  exportExLoading.value = true\r\n  await exportExcel()\r\n  exportExLoading.value = false\r\n}\r\n/**\r\n * 分配角色\r\n */\r\nfunction assignRoles(id) {\r\n  isShowAssignRoles.value = true\r\n  currentUserId.value = id\r\n}\r\nonMounted(() => {\r\n  getUserListInfo()\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.user-list-container {\r\n  .head {\r\n    margin-bottom: 10px;\r\n  }\r\n  .pagination-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-top: 10px;\r\n    :deep(.el-pagination) {\r\n      overflow-x: auto;\r\n    }\r\n  }\r\n\r\n  :deep(.el-tag) {\r\n    margin: 5px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}