{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { getTagsList } from './getTagsList';\nimport { useRoute, useRouter } from 'vue-router';\nimport ContextMenu from './ContextMenu';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const isShowCm = ref(false);\n    const cmTop = ref('0');\n    const cmLeft = ref('0');\n    const vueRoute = useRoute();\n    const routeList = getTagsList(vueRoute);\n    let valueRoute = null;\n    function onCloseTag(route) {\n      routeList.value.splice(routeList.value.indexOf(route), 1);\n    }\n    function closeContexMenu() {\n      isShowCm.value = false;\n      document.removeEventListener('click', closeContexMenu);\n    }\n    function onContextMenu(e, route) {\n      valueRoute = route;\n      cmTop.value = e.y + 'px';\n      cmLeft.value = e.x + 'px';\n      isShowCm.value = true;\n      document.addEventListener('click', closeContexMenu);\n    }\n    async function onRefreshThePage() {\n      await router.push(valueRoute.path);\n      router.go(0);\n    }\n    function onCloseTheRightTabs() {\n      const index = routeList.value.indexOf(valueRoute);\n      routeList.value.splice(index + 1);\n      router.push(valueRoute.path);\n    }\n    function onCloseTheOtherTabs() {\n      const index = routeList.value.indexOf(valueRoute);\n      routeList.value.splice(index + 1);\n      routeList.value.splice(0, index);\n      router.push(valueRoute.path);\n    }\n    const __returned__ = {\n      router,\n      isShowCm,\n      cmTop,\n      cmLeft,\n      vueRoute,\n      routeList,\n      get valueRoute() {\n        return valueRoute;\n      },\n      set valueRoute(v) {\n        valueRoute = v;\n      },\n      onCloseTag,\n      closeContexMenu,\n      onContextMenu,\n      onRefreshThePage,\n      onCloseTheRightTabs,\n      onCloseTheOtherTabs,\n      ref,\n      get getTagsList() {\n        return getTagsList;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get ContextMenu() {\n        return ContextMenu;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","getTagsList","useRoute","useRouter","ContextMenu","router","isShowCm","cmTop","cmLeft","vueRoute","routeList","valueRoute","onCloseTag","route","value","splice","indexOf","closeContexMenu","document","removeEventListener","onContextMenu","e","y","x","addEventListener","onRefreshThePage","push","path","go","onCloseTheRightTabs","index","onCloseTheOtherTabs"],"sources":["D:/myproject/毕业设计/pet-mall/apps/admin/src/components/TagsView/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"tags-view-container\" v-show=\"routeList.length\">\r\n    <el-scrollbar>\r\n      <div class=\"tags-list\">\r\n        <el-tag\r\n          class=\"el-tag\"\r\n          size=\"large\"\r\n          closable\r\n          v-for=\"route of routeList\"\r\n          :key=\"route.path\"\r\n          @close=\"onCloseTag(route)\"\r\n          @contextmenu.stop.prevent=\"onContextMenu($event, route)\"\r\n          :type=\"vueRoute.path === route.path ? 'primary' : 'info'\"\r\n        >\r\n          <router-link :to=\"route.path\">{{ route.title }}</router-link>\r\n        </el-tag>\r\n      </div>\r\n    </el-scrollbar>\r\n    <!-- 右键菜单 -->\r\n    <ContextMenu\r\n      :top=\"cmTop\"\r\n      :left=\"cmLeft\"\r\n      :visble=\"isShowCm\"\r\n      @refreshThePage=\"onRefreshThePage\"\r\n      @closeTheRightTabs=\"onCloseTheRightTabs\"\r\n      @closeTheOtherTabs=\"onCloseTheOtherTabs\"\r\n    ></ContextMenu>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { getTagsList } from './getTagsList'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport ContextMenu from './ContextMenu'\r\nconst router = useRouter()\r\nconst isShowCm = ref(false)\r\nconst cmTop = ref('0')\r\nconst cmLeft = ref('0')\r\nconst vueRoute = useRoute()\r\nconst routeList = getTagsList(vueRoute)\r\nlet valueRoute = null\r\nfunction onCloseTag(route) {\r\n  routeList.value.splice(routeList.value.indexOf(route), 1)\r\n}\r\nfunction closeContexMenu() {\r\n  isShowCm.value = false\r\n  document.removeEventListener('click', closeContexMenu)\r\n}\r\nfunction onContextMenu(e, route) {\r\n  valueRoute = route\r\n  cmTop.value = e.y + 'px'\r\n  cmLeft.value = e.x + 'px'\r\n  isShowCm.value = true\r\n  document.addEventListener('click', closeContexMenu)\r\n}\r\nasync function onRefreshThePage() {\r\n  await router.push(valueRoute.path)\r\n  router.go(0)\r\n}\r\nfunction onCloseTheRightTabs() {\r\n  const index = routeList.value.indexOf(valueRoute)\r\n  routeList.value.splice(index + 1)\r\n  router.push(valueRoute.path)\r\n}\r\nfunction onCloseTheOtherTabs() {\r\n  const index = routeList.value.indexOf(valueRoute)\r\n  routeList.value.splice(index + 1)\r\n  routeList.value.splice(0, index)\r\n  router.push(valueRoute.path)\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '@/style/index.scss';\r\n.tags-view-container {\r\n  height: $tagsVeiwHeight;\r\n  padding: 0 10px;\r\n  .tags-list {\r\n    display: flex;\r\n    margin-top: 5px;\r\n    :deep(.el-tag) {\r\n      margin: 0px 1px;\r\n      border-bottom: none;\r\n      border-top-left-radius: 10px !important;\r\n      border-top-right-radius: 10px !important;\r\n      border-bottom-left-radius: 0 !important;\r\n      border-bottom-right-radius: 0 !important;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";AA8BA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;AAChD,OAAOC,WAAW,MAAM,eAAe;;;;;;;IACvC,MAAMC,MAAM,GAAGF,SAAS,CAAC,CAAC;IAC1B,MAAMG,QAAQ,GAAGN,GAAG,CAAC,KAAK,CAAC;IAC3B,MAAMO,KAAK,GAAGP,GAAG,CAAC,GAAG,CAAC;IACtB,MAAMQ,MAAM,GAAGR,GAAG,CAAC,GAAG,CAAC;IACvB,MAAMS,QAAQ,GAAGP,QAAQ,CAAC,CAAC;IAC3B,MAAMQ,SAAS,GAAGT,WAAW,CAACQ,QAAQ,CAAC;IACvC,IAAIE,UAAU,GAAG,IAAI;IACrB,SAASC,UAAUA,CAACC,KAAK,EAAE;MACzBH,SAAS,CAACI,KAAK,CAACC,MAAM,CAACL,SAAS,CAACI,KAAK,CAACE,OAAO,CAACH,KAAK,CAAC,EAAE,CAAC,CAAC;IAC3D;IACA,SAASI,eAAeA,CAAA,EAAG;MACzBX,QAAQ,CAACQ,KAAK,GAAG,KAAK;MACtBI,QAAQ,CAACC,mBAAmB,CAAC,OAAO,EAAEF,eAAe,CAAC;IACxD;IACA,SAASG,aAAaA,CAACC,CAAC,EAAER,KAAK,EAAE;MAC/BF,UAAU,GAAGE,KAAK;MAClBN,KAAK,CAACO,KAAK,GAAGO,CAAC,CAACC,CAAC,GAAG,IAAI;MACxBd,MAAM,CAACM,KAAK,GAAGO,CAAC,CAACE,CAAC,GAAG,IAAI;MACzBjB,QAAQ,CAACQ,KAAK,GAAG,IAAI;MACrBI,QAAQ,CAACM,gBAAgB,CAAC,OAAO,EAAEP,eAAe,CAAC;IACrD;IACA,eAAeQ,gBAAgBA,CAAA,EAAG;MAChC,MAAMpB,MAAM,CAACqB,IAAI,CAACf,UAAU,CAACgB,IAAI,CAAC;MAClCtB,MAAM,CAACuB,EAAE,CAAC,CAAC,CAAC;IACd;IACA,SAASC,mBAAmBA,CAAA,EAAG;MAC7B,MAAMC,KAAK,GAAGpB,SAAS,CAACI,KAAK,CAACE,OAAO,CAACL,UAAU,CAAC;MACjDD,SAAS,CAACI,KAAK,CAACC,MAAM,CAACe,KAAK,GAAG,CAAC,CAAC;MACjCzB,MAAM,CAACqB,IAAI,CAACf,UAAU,CAACgB,IAAI,CAAC;IAC9B;IACA,SAASI,mBAAmBA,CAAA,EAAG;MAC7B,MAAMD,KAAK,GAAGpB,SAAS,CAACI,KAAK,CAACE,OAAO,CAACL,UAAU,CAAC;MACjDD,SAAS,CAACI,KAAK,CAACC,MAAM,CAACe,KAAK,GAAG,CAAC,CAAC;MACjCpB,SAAS,CAACI,KAAK,CAACC,MAAM,CAAC,CAAC,EAAEe,KAAK,CAAC;MAChCzB,MAAM,CAACqB,IAAI,CAACf,UAAU,CAACgB,IAAI,CAAC;IAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}