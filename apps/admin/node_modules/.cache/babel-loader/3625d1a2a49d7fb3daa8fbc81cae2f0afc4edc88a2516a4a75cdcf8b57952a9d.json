{"ast":null,"code":"import { ref, nextTick } from 'vue';\nimport { useStore } from 'vuex';\nimport getFuse from './fuse';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const routes = store.getters.routes;\n    const fuse = getFuse(routes);\n    const isSeach = ref(false);\n    const inputRef = ref({});\n    const searchValue = ref('');\n    const resList = ref([]);\n    const isShowRes = ref(false);\n    // 点击搜索按钮\n    function onSeach() {\n      isSeach.value = true;\n      nextTick(() => {\n        inputRef.value.focus();\n      });\n      // 点击页面其他部分时，也关闭搜索框\n      // 点击搜索框时，需要阻止事件冒泡\n      document.addEventListener('click', onIptBlur);\n    }\n    // 关闭输入框\n    function onIptBlur() {\n      isSeach.value = false;\n      isShowRes.value = false;\n      searchValue.value = ''; // 清空输入\n      document.removeEventListener('click', onIptBlur);\n    }\n    // 输入内容改变\n    function onInputChange(value) {\n      isShowRes.value = true;\n      resList.value = fuse.value.search(value);\n    }\n    const __returned__ = {\n      store,\n      routes,\n      fuse,\n      isSeach,\n      inputRef,\n      searchValue,\n      resList,\n      isShowRes,\n      onSeach,\n      onIptBlur,\n      onInputChange,\n      ref,\n      nextTick,\n      get useStore() {\n        return useStore;\n      },\n      get getFuse() {\n        return getFuse;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","nextTick","useStore","getFuse","store","routes","getters","fuse","isSeach","inputRef","searchValue","resList","isShowRes","onSeach","value","focus","document","addEventListener","onIptBlur","removeEventListener","onInputChange","search"],"sources":["D:/myproject/毕业设计/pet-mall/apps/admin/src/components/PageSearch/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-seach-container\" @click.stop>\r\n    <el-popover :visible=\"isShowRes\" v-if=\"isSeach\" width=\"auto\">\r\n      <template #reference>\r\n        <el-input\r\n          ref=\"inputRef\"\r\n          v-model.trim=\"searchValue\"\r\n          @input=\"onInputChange\"\r\n          @click.stop\r\n        >\r\n          <template #suffix>\r\n            <SvgIcon\r\n              icon=\"my-seach\"\r\n              @click=\"onIptBlur\"\r\n              :title=\"$t('PageSearch.index.961440-0')\"\r\n            ></SvgIcon>\r\n          </template>\r\n        </el-input>\r\n      </template>\r\n      <!-- 搜索结果 -->\r\n      <template #default>\r\n        <ul class=\"search-list\" @click.stop>\r\n          <li v-for=\"item of resList\" :key=\"item.item.path\">\r\n            <router-link :to=\"item.item.path\">{{\r\n              item.item.title\r\n            }}</router-link>\r\n          </li>\r\n          <li v-show=\"!resList.length\">\r\n            {{ $t('PageSearch.index.961440-1') }}\r\n          </li>\r\n        </ul>\r\n      </template>\r\n    </el-popover>\r\n    <SvgIcon\r\n      v-else\r\n      icon=\"my-seach\"\r\n      @click=\"onSeach\"\r\n      :title=\"$t('PageSearch.index.961440-2')\"\r\n    ></SvgIcon>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, nextTick } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport getFuse from './fuse'\r\nconst store = useStore()\r\nconst routes = store.getters.routes\r\nconst fuse = getFuse(routes)\r\nconst isSeach = ref(false)\r\nconst inputRef = ref({})\r\nconst searchValue = ref('')\r\nconst resList = ref([])\r\nconst isShowRes = ref(false)\r\n// 点击搜索按钮\r\nfunction onSeach() {\r\n  isSeach.value = true\r\n  nextTick(() => {\r\n    inputRef.value.focus()\r\n  })\r\n  // 点击页面其他部分时，也关闭搜索框\r\n  // 点击搜索框时，需要阻止事件冒泡\r\n  document.addEventListener('click', onIptBlur)\r\n}\r\n// 关闭输入框\r\nfunction onIptBlur() {\r\n  isSeach.value = false\r\n  isShowRes.value = false\r\n  searchValue.value = '' // 清空输入\r\n  document.removeEventListener('click', onIptBlur)\r\n}\r\n// 输入内容改变\r\nfunction onInputChange(value) {\r\n  isShowRes.value = true\r\n  resList.value = fuse.value.search(value)\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n//el-popover元素被element-plus注入到了最外层的html中想要修改其插槽元素(.search-list)的样式则不能声明scoped\r\n\r\n.page-seach-container {\r\n  display: flex;\r\n}\r\n.search-list {\r\n  width: 100%;\r\n  font-size: 1.2em;\r\n  li {\r\n    display: flex;\r\n    justify-content: center;\r\n    border-bottom: 1px solid gainsboro;\r\n    margin-bottom: 5px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"AA0CA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SAASC,QAAQ,QAAQ,MAAM;AAC/B,OAAOC,OAAO,MAAM,QAAQ;;;;;;;IAC5B,MAAMC,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,MAAM,GAAGD,KAAK,CAACE,OAAO,CAACD,MAAM;IACnC,MAAME,IAAI,GAAGJ,OAAO,CAACE,MAAM,CAAC;IAC5B,MAAMG,OAAO,GAAGR,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMS,QAAQ,GAAGT,GAAG,CAAC,CAAC,CAAC,CAAC;IACxB,MAAMU,WAAW,GAAGV,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMW,OAAO,GAAGX,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMY,SAAS,GAAGZ,GAAG,CAAC,KAAK,CAAC;IAC5B;IACA,SAASa,OAAOA,CAAA,EAAG;MACjBL,OAAO,CAACM,KAAK,GAAG,IAAI;MACpBb,QAAQ,CAAC,MAAM;QACbQ,QAAQ,CAACK,KAAK,CAACC,KAAK,CAAC,CAAC;MACxB,CAAC,CAAC;MACF;MACA;MACAC,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEC,SAAS,CAAC;IAC/C;IACA;IACA,SAASA,SAASA,CAAA,EAAG;MACnBV,OAAO,CAACM,KAAK,GAAG,KAAK;MACrBF,SAAS,CAACE,KAAK,GAAG,KAAK;MACvBJ,WAAW,CAACI,KAAK,GAAG,EAAE,EAAC;MACvBE,QAAQ,CAACG,mBAAmB,CAAC,OAAO,EAAED,SAAS,CAAC;IAClD;IACA;IACA,SAASE,aAAaA,CAACN,KAAK,EAAE;MAC5BF,SAAS,CAACE,KAAK,GAAG,IAAI;MACtBH,OAAO,CAACG,KAAK,GAAGP,IAAI,CAACO,KAAK,CAACO,MAAM,CAACP,KAAK,CAAC;IAC1C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}