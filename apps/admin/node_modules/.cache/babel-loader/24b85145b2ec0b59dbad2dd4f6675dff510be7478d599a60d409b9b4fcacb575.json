{"ast":null,"code":"import { onMounted, ref } from 'vue';\nimport AddPerm from './components/AddPerm';\nimport { getPermissionList, deletePermission } from '@/api/permission-manage';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const isShowAddPerm = ref(false);\n    const parentInfo = ref({\n      id: undefined,\n      name: ''\n    });\n    const permissionList = ref();\n    /**\r\n     * 添加权限\r\n     */\n    function onAddPerm(parentPerm) {\n      isShowAddPerm.value = true;\n      parentInfo.value.id = parentPerm.id;\n      parentInfo.value.name = parentPerm.name;\n    }\n\n    /**\r\n     * 获取权限列表\r\n     */\n    async function getPermissionListInfo() {\n      permissionList.value = await getPermissionList();\n    }\n\n    /**\r\n     * 删除权限\r\n     */\n    async function onDeletePerm(perm) {\n      deletePermission(perm.id).then(() => {\n        getPermissionListInfo();\n      });\n    }\n    onMounted(() => {\n      getPermissionListInfo();\n    });\n    const __returned__ = {\n      isShowAddPerm,\n      parentInfo,\n      permissionList,\n      onAddPerm,\n      getPermissionListInfo,\n      onDeletePerm,\n      onMounted,\n      ref,\n      get AddPerm() {\n        return AddPerm;\n      },\n      get getPermissionList() {\n        return getPermissionList;\n      },\n      get deletePermission() {\n        return deletePermission;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","AddPerm","getPermissionList","deletePermission","isShowAddPerm","parentInfo","id","undefined","name","permissionList","onAddPerm","parentPerm","value","getPermissionListInfo","onDeletePerm","perm","then"],"sources":["D:/myproject/毕业设计/pet-mall/apps/admin/src/views/Acl/Menu/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-card shadow=\"never\">\r\n      <div class=\"head\">\r\n        <el-button\r\n          type=\"primary\"\r\n          v-permission=\"'add-perm'\"\r\n          @click=\"onAddPerm({ id: undefined, name: $t('Menu.index.925822-0') })\"\r\n          >{{ $t('Menu.index.925822-1') }}</el-button\r\n        >\r\n      </div>\r\n      <el-table :data=\"permissionList\" row-key=\"id\" border>\r\n        <el-table-column :label=\"$t('Menu.index.925822-2')\">\r\n          <template #default=\"{ row }\">{{ row.name }}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('Menu.index.925822-3')\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag :type=\"row.type === 1 ? '' : 'success'\">{{\r\n              row.type === 1 ? $t('Menu.index.925822-4') : $t('Menu.index.925822-5')\r\n            }}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('Menu.index.925822-6')\"\r\n          ><template #default=\"{ row }\">{{\r\n            row.code\r\n          }}</template></el-table-column\r\n        >\r\n        <el-table-column :label=\"$t('Menu.index.925822-7')\">\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"onAddPerm(row)\"\r\n              :title=\"$t('Menu.index.925822-8')\"\r\n              icon=\"Plus\"\r\n              v-permission=\"'add-perm'\"\r\n            ></el-button>\r\n            <el-popconfirm @confirm=\"onDeletePerm(row)\" :title=\"$t('Menu.index.925822-9')\">\r\n              <template #reference>\r\n                <el-button\r\n                  type=\"danger\"\r\n                  :title=\"$t('Menu.index.925822-10')\"\r\n                  icon=\"Delete\"\r\n                  v-permission=\"'delete-perm'\"\r\n                ></el-button\r\n              ></template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <!-- 对话框 -->\r\n    <AddPerm\r\n      v-model=\"isShowAddPerm\"\r\n      :parentInfo=\"parentInfo\"\r\n      @complete=\"getPermissionListInfo\"\r\n    ></AddPerm>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from 'vue'\r\nimport AddPerm from './components/AddPerm'\r\nimport { getPermissionList, deletePermission } from '@/api/permission-manage'\r\nconst isShowAddPerm = ref(false)\r\nconst parentInfo = ref({ id: undefined, name: '' })\r\nconst permissionList = ref()\r\n/**\r\n * 添加权限\r\n */\r\nfunction onAddPerm(parentPerm) {\r\n  isShowAddPerm.value = true\r\n  parentInfo.value.id = parentPerm.id\r\n  parentInfo.value.name = parentPerm.name\r\n}\r\n\r\n/**\r\n * 获取权限列表\r\n */\r\nasync function getPermissionListInfo() {\r\n  permissionList.value = await getPermissionList()\r\n}\r\n\r\n/**\r\n * 删除权限\r\n */\r\nasync function onDeletePerm(perm) {\r\n  deletePermission(perm.id).then(() => {\r\n    getPermissionListInfo()\r\n  })\r\n}\r\nonMounted(() => {\r\n  getPermissionListInfo()\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.head {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n"],"mappings":"AA4DA,SAASA,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACpC,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,SAASC,iBAAiB,EAAEC,gBAAgB,QAAQ,yBAAyB;;;;;;;IAC7E,MAAMC,aAAa,GAAGJ,GAAG,CAAC,KAAK,CAAC;IAChC,MAAMK,UAAU,GAAGL,GAAG,CAAC;MAAEM,EAAE,EAAEC,SAAS;MAAEC,IAAI,EAAE;IAAG,CAAC,CAAC;IACnD,MAAMC,cAAc,GAAGT,GAAG,CAAC,CAAC;IAC5B;AACA;AACA;IACA,SAASU,SAASA,CAACC,UAAU,EAAE;MAC7BP,aAAa,CAACQ,KAAK,GAAG,IAAI;MAC1BP,UAAU,CAACO,KAAK,CAACN,EAAE,GAAGK,UAAU,CAACL,EAAE;MACnCD,UAAU,CAACO,KAAK,CAACJ,IAAI,GAAGG,UAAU,CAACH,IAAI;IACzC;;IAEA;AACA;AACA;IACA,eAAeK,qBAAqBA,CAAA,EAAG;MACrCJ,cAAc,CAACG,KAAK,GAAG,MAAMV,iBAAiB,CAAC,CAAC;IAClD;;IAEA;AACA;AACA;IACA,eAAeY,YAAYA,CAACC,IAAI,EAAE;MAChCZ,gBAAgB,CAACY,IAAI,CAACT,EAAE,CAAC,CAACU,IAAI,CAAC,MAAM;QACnCH,qBAAqB,CAAC,CAAC;MACzB,CAAC,CAAC;IACJ;IACAd,SAAS,CAAC,MAAM;MACdc,qBAAqB,CAAC,CAAC;IACzB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}