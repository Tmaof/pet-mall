{"ast":null,"code":"import { getRoleList, deleteRole } from '@/api/role-manage';\nimport { onMounted, ref } from 'vue';\nimport AddRole from './components/AddRole';\nimport AssignPerm from './components/AssignPerm';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const roleList = ref([]);\n    const isShowAddRoleDia = ref(false);\n    const isShowAssignPermDia = ref(false);\n    const roleInfo = ref({});\n    async function getRoleListInfo() {\n      roleList.value = await getRoleList();\n    }\n    /**\r\n     * 删除角色\r\n     */\n    function deleteRoleInfo(id) {\n      deleteRole(id).then(() => {\n        getRoleListInfo();\n      });\n    }\n    /**\r\n     * 为角色分配权限\r\n     */\n    function onAssignPerm(role) {\n      roleInfo.value = role;\n      isShowAssignPermDia.value = true;\n    }\n    onMounted(() => {\n      getRoleListInfo();\n    });\n    const __returned__ = {\n      roleList,\n      isShowAddRoleDia,\n      isShowAssignPermDia,\n      roleInfo,\n      getRoleListInfo,\n      deleteRoleInfo,\n      onAssignPerm,\n      get getRoleList() {\n        return getRoleList;\n      },\n      get deleteRole() {\n        return deleteRole;\n      },\n      onMounted,\n      ref,\n      get AddRole() {\n        return AddRole;\n      },\n      get AssignPerm() {\n        return AssignPerm;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["getRoleList","deleteRole","onMounted","ref","AddRole","AssignPerm","roleList","isShowAddRoleDia","isShowAssignPermDia","roleInfo","getRoleListInfo","value","deleteRoleInfo","id","then","onAssignPerm","role"],"sources":["D:/myproject/毕业设计/pet-mall/apps/admin/src/views/Acl/Role/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-card shadow=\"never\">\r\n      <div class=\"head\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"isShowAddRoleDia = true\"\r\n          v-permission=\"'add-role'\"\r\n          >{{ $t('Role.index.017834-0') }}</el-button\r\n        >\r\n      </div>\r\n      <el-table :data=\"roleList\" border>\r\n        <el-table-column :label=\"$t('Role.index.017834-1')\" type=\"index\"></el-table-column>\r\n        <el-table-column :label=\"$t('Role.index.017834-2')\">\r\n          <template #default=\"{ row }\">\r\n            {{ row.name }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('Role.index.017834-3')\">\r\n          <template #default=\"{ row }\">\r\n            {{ row.describe }}\r\n          </template></el-table-column\r\n        >\r\n        <el-table-column :label=\"$t('Role.index.017834-4')\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag v-for=\"(name, i) of row.names\" :key=\"i\">{{ name }}</el-tag>\r\n          </template></el-table-column\r\n        >\r\n        <el-table-column :label=\"$t('Role.index.017834-5')\" resizable>\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              icon=\"Tools\"\r\n              type=\"primary\"\r\n              @click=\"onAssignPerm(row)\"\r\n              v-permission=\"'assign-perm'\"\r\n            >\r\n            </el-button>\r\n            <el-popconfirm :title=\"$t('Role.index.017834-6')\" @confirm=\"deleteRoleInfo(row.id)\">\r\n              <template #reference>\r\n                <el-button\r\n                  icon=\"DeleteFilled\"\r\n                  type=\"danger\"\r\n                  v-permission=\"'delete-role'\"\r\n                ></el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <!-- 对话框 -->\r\n    <AddRole v-model=\"isShowAddRoleDia\" @complete=\"getRoleListInfo\"></AddRole>\r\n    <AssignPerm\r\n      v-model=\"isShowAssignPermDia\"\r\n      :roleInfo=\"roleInfo\"\r\n      @complete=\"getRoleListInfo\"\r\n    ></AssignPerm>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { getRoleList, deleteRole } from '@/api/role-manage'\r\nimport { onMounted, ref } from 'vue'\r\nimport AddRole from './components/AddRole'\r\nimport AssignPerm from './components/AssignPerm'\r\nconst roleList = ref([])\r\nconst isShowAddRoleDia = ref(false)\r\nconst isShowAssignPermDia = ref(false)\r\nconst roleInfo = ref({})\r\nasync function getRoleListInfo() {\r\n  roleList.value = await getRoleList()\r\n}\r\n/**\r\n * 删除角色\r\n */\r\nfunction deleteRoleInfo(id) {\r\n  deleteRole(id).then(() => {\r\n    getRoleListInfo()\r\n  })\r\n}\r\n/**\r\n * 为角色分配权限\r\n */\r\nfunction onAssignPerm(role) {\r\n  roleInfo.value = role\r\n  isShowAssignPermDia.value = true\r\n}\r\n\r\nonMounted(() => {\r\n  getRoleListInfo()\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.head {\r\n  margin-bottom: 10px;\r\n}\r\n:deep(.el-tag) {\r\n  margin: 5px;\r\n}\r\n</style>\r\n"],"mappings":"AA6DA,SAASA,WAAW,EAAEC,UAAU,QAAQ,mBAAmB;AAC3D,SAASC,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACpC,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,OAAOC,UAAU,MAAM,yBAAyB;;;;;;;IAChD,MAAMC,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,gBAAgB,GAAGJ,GAAG,CAAC,KAAK,CAAC;IACnC,MAAMK,mBAAmB,GAAGL,GAAG,CAAC,KAAK,CAAC;IACtC,MAAMM,QAAQ,GAAGN,GAAG,CAAC,CAAC,CAAC,CAAC;IACxB,eAAeO,eAAeA,CAAA,EAAG;MAC/BJ,QAAQ,CAACK,KAAK,GAAG,MAAMX,WAAW,CAAC,CAAC;IACtC;IACA;AACA;AACA;IACA,SAASY,cAAcA,CAACC,EAAE,EAAE;MAC1BZ,UAAU,CAACY,EAAE,CAAC,CAACC,IAAI,CAAC,MAAM;QACxBJ,eAAe,CAAC,CAAC;MACnB,CAAC,CAAC;IACJ;IACA;AACA;AACA;IACA,SAASK,YAAYA,CAACC,IAAI,EAAE;MAC1BP,QAAQ,CAACE,KAAK,GAAGK,IAAI;MACrBR,mBAAmB,CAACG,KAAK,GAAG,IAAI;IAClC;IAEAT,SAAS,CAAC,MAAM;MACdQ,eAAe,CAAC,CAAC;IACnB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}