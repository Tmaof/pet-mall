{"ast":null,"code":"import settings from '@/settings';\nimport SidebarMenu from './SidebarMenu/SidebarMenu.vue';\nimport { onMounted, ref } from 'vue';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const {\n      sideBarLogo = {\n        isShow: false\n      },\n      minDargWidth,\n      maxDargWidth,\n      initWidth,\n      mobileCollapseToZero\n    } = settings.sideBar;\n    const dargLineRef = ref({});\n    const sideBarRef = ref({});\n    const sideBarWidth = ref(initWidth);\n    const isDarging = ref(false); // 拖动过程中，不需要过渡效果\n    function setIsCollSideBar(value) {\n      store.commit('layout/SET_isCollapseSideBar', value);\n    }\n    function addDargEvent() {\n      function mousemove(e) {\n        let temp = sideBarWidth.value;\n        temp += e.movementX;\n        // 拖动结束，超过了允许宽度的最大，最小值\n        if (temp < minDargWidth) {\n          mouseup();\n          setIsCollSideBar(true);\n        } else if (temp > maxDargWidth) {\n          mouseup();\n        } else {\n          sideBarWidth.value = temp;\n        }\n      }\n      function mouseup() {\n        // 拖动结束后再开放选中文字。\n        setTimeout(() => {\n          document.onselectstart = null;\n        }, 1000);\n        document.removeEventListener('mousemove', mousemove);\n        document.removeEventListener('mouseup', mouseup);\n        isDarging.value = false;\n      }\n      function mousedown() {\n        // 在拖动过程中，禁止选中文字\n        document.onselectstart = function () {\n          return false;\n        };\n        isDarging.value = true;\n        document.addEventListener('mousemove', mousemove);\n        document.addEventListener('mouseup', mouseup);\n      }\n      dargLineRef.value.addEventListener('mousedown', mousedown);\n    }\n    onMounted(() => {\n      addDargEvent();\n    });\n    const __returned__ = {\n      store,\n      sideBarLogo,\n      minDargWidth,\n      maxDargWidth,\n      initWidth,\n      mobileCollapseToZero,\n      dargLineRef,\n      sideBarRef,\n      sideBarWidth,\n      isDarging,\n      setIsCollSideBar,\n      addDargEvent,\n      get settings() {\n        return settings;\n      },\n      SidebarMenu,\n      onMounted,\n      ref,\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["settings","SidebarMenu","onMounted","ref","useStore","store","sideBarLogo","isShow","minDargWidth","maxDargWidth","initWidth","mobileCollapseToZero","sideBar","dargLineRef","sideBarRef","sideBarWidth","isDarging","setIsCollSideBar","value","commit","addDargEvent","mousemove","e","temp","movementX","mouseup","setTimeout","document","onselectstart","removeEventListener","mousedown","addEventListener"],"sources":["D:/myproject/毕业设计/pet-mall/apps/admin/src/layout/SideBar/index.vue"],"sourcesContent":["<template>\r\n  <div\r\n    :class=\"{\r\n      'sidebar-container': true,\r\n      'sidebar-container-mobile': $store.getters.screenInfo.isMobile,\r\n      'sidebar-container-collapse-toZero':\r\n        $store.getters.isCollapseSideBar &&\r\n        mobileCollapseToZero &&\r\n        $store.getters.isMobile,\r\n      'sidebar-container-collapse': $store.getters.isCollapseSideBar\r\n    }\"\r\n    :style=\"{\r\n      width: `${sideBarWidth}px`,\r\n      transition: isDarging ? undefined : `width ease-in-out 0.3s`\r\n    }\"\r\n    ref=\"sideBarRef\"\r\n  >\r\n    <div class=\"main\">\r\n      <div class=\"top-logo\" v-if=\"sideBarLogo.isShow\">\r\n        <router-link to=\"/\">\r\n          <h2 v-if=\"sideBarLogo.type === 'text'\">\r\n            {{ sideBarLogo.value }}\r\n          </h2>\r\n          <el-image\r\n            v-if=\"sideBarLogo.type === 'img'\"\r\n            fit=\"contain\"\r\n            :src=\"sideBarLogo.value\"\r\n          ></el-image>\r\n        </router-link>\r\n      </div>\r\n\r\n      <el-scrollbar>\r\n        <SidebarMenu></SidebarMenu>\r\n      </el-scrollbar>\r\n    </div>\r\n    <div\r\n      class=\"darg-line\"\r\n      ref=\"dargLineRef\"\r\n      :style=\"{\r\n        cursor: $store.getters.isCollapseSideBar ? undefined : ' e-resize'\r\n      }\"\r\n    ></div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport settings from '@/settings'\r\nimport SidebarMenu from './SidebarMenu/SidebarMenu.vue'\r\nimport { onMounted, ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nconst store = useStore()\r\n\r\nconst {\r\n  sideBarLogo = { isShow: false },\r\n  minDargWidth,\r\n  maxDargWidth,\r\n  initWidth,\r\n  mobileCollapseToZero\r\n} = settings.sideBar\r\nconst dargLineRef = ref({})\r\nconst sideBarRef = ref({})\r\nconst sideBarWidth = ref(initWidth)\r\nconst isDarging = ref(false) // 拖动过程中，不需要过渡效果\r\nfunction setIsCollSideBar(value) {\r\n  store.commit('layout/SET_isCollapseSideBar', value)\r\n}\r\nfunction addDargEvent() {\r\n  function mousemove(e) {\r\n    let temp = sideBarWidth.value\r\n    temp += e.movementX\r\n    // 拖动结束，超过了允许宽度的最大，最小值\r\n    if (temp < minDargWidth) {\r\n      mouseup()\r\n      setIsCollSideBar(true)\r\n    } else if (temp > maxDargWidth) {\r\n      mouseup()\r\n    } else {\r\n      sideBarWidth.value = temp\r\n    }\r\n  }\r\n  function mouseup() {\r\n    // 拖动结束后再开放选中文字。\r\n    setTimeout(() => {\r\n      document.onselectstart = null\r\n    }, 1000)\r\n    document.removeEventListener('mousemove', mousemove)\r\n    document.removeEventListener('mouseup', mouseup)\r\n    isDarging.value = false\r\n  }\r\n\r\n  function mousedown() {\r\n    // 在拖动过程中，禁止选中文字\r\n    document.onselectstart = function () {\r\n      return false\r\n    }\r\n    isDarging.value = true\r\n    document.addEventListener('mousemove', mousemove)\r\n    document.addEventListener('mouseup', mouseup)\r\n  }\r\n  dargLineRef.value.addEventListener('mousedown', mousedown)\r\n}\r\nonMounted(() => {\r\n  addDargEvent()\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/style/index.scss';\r\n.sidebar-container {\r\n  display: flex;\r\n  position: relative;\r\n  flex-direction: row;\r\n  flex-shrink: 0;\r\n  overflow: hidden;\r\n\r\n  .main {\r\n    flex-shrink: 1;\r\n    flex-grow: 1;\r\n    width: 100%;\r\n    .top-logo {\r\n      display: flex;\r\n      justify-content: center;\r\n      width: 100%;\r\n      height: $narBarHeight;\r\n      line-height: $narBarHeight;\r\n      text-align: center;\r\n\r\n      h2 {\r\n        font-weight: bolder;\r\n        font-size: larger;\r\n      }\r\n    }\r\n\r\n    :deep(.menu) {\r\n      .el-menu {\r\n        border: none;\r\n        // 主菜单\r\n        .el-menu-item,\r\n        .el-sub-menu__title,\r\n        .el-sub-menu {\r\n          font-size: $menuFontSize;\r\n          font-weight: $menuFontWeight;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .darg-line {\r\n    position: absolute;\r\n    right: 0;\r\n    width: 10px;\r\n    height: 100%;\r\n  }\r\n\r\n  &:hover .unfold-btn {\r\n    display: inline;\r\n  }\r\n}\r\n\r\n.sidebar-container-collapse {\r\n  width: $sidebarCollapseWidth !important;\r\n}\r\n\r\n.sidebar-container-collapse-toZero {\r\n  width: 0px !important;\r\n}\r\n.sidebar-container-collapse-toZero {\r\n  width: 0 !important;\r\n}\r\n.sidebar-container-mobile {\r\n  position: fixed;\r\n  height: 100%;\r\n  z-index: 999999;\r\n}\r\n</style>\r\n"],"mappings":"AA8CA,OAAOA,QAAQ,MAAM,YAAY;AACjC,OAAOC,WAAW,MAAM,+BAA+B;AACvD,SAASC,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACpC,SAASC,QAAQ,QAAQ,MAAM;;;;;;;IAC/B,MAAMC,KAAK,GAAGD,QAAQ,CAAC,CAAC;IAExB,MAAM;MACJE,WAAW,GAAG;QAAEC,MAAM,EAAE;MAAM,CAAC;MAC/BC,YAAY;MACZC,YAAY;MACZC,SAAS;MACTC;IACF,CAAC,GAAGX,QAAQ,CAACY,OAAO;IACpB,MAAMC,WAAW,GAAGV,GAAG,CAAC,CAAC,CAAC,CAAC;IAC3B,MAAMW,UAAU,GAAGX,GAAG,CAAC,CAAC,CAAC,CAAC;IAC1B,MAAMY,YAAY,GAAGZ,GAAG,CAACO,SAAS,CAAC;IACnC,MAAMM,SAAS,GAAGb,GAAG,CAAC,KAAK,CAAC,EAAC;IAC7B,SAASc,gBAAgBA,CAACC,KAAK,EAAE;MAC/Bb,KAAK,CAACc,MAAM,CAAC,8BAA8B,EAAED,KAAK,CAAC;IACrD;IACA,SAASE,YAAYA,CAAA,EAAG;MACtB,SAASC,SAASA,CAACC,CAAC,EAAE;QACpB,IAAIC,IAAI,GAAGR,YAAY,CAACG,KAAK;QAC7BK,IAAI,IAAID,CAAC,CAACE,SAAS;QACnB;QACA,IAAID,IAAI,GAAGf,YAAY,EAAE;UACvBiB,OAAO,CAAC,CAAC;UACTR,gBAAgB,CAAC,IAAI,CAAC;QACxB,CAAC,MAAM,IAAIM,IAAI,GAAGd,YAAY,EAAE;UAC9BgB,OAAO,CAAC,CAAC;QACX,CAAC,MAAM;UACLV,YAAY,CAACG,KAAK,GAAGK,IAAI;QAC3B;MACF;MACA,SAASE,OAAOA,CAAA,EAAG;QACjB;QACAC,UAAU,CAAC,MAAM;UACfC,QAAQ,CAACC,aAAa,GAAG,IAAI;QAC/B,CAAC,EAAE,IAAI,CAAC;QACRD,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAER,SAAS,CAAC;QACpDM,QAAQ,CAACE,mBAAmB,CAAC,SAAS,EAAEJ,OAAO,CAAC;QAChDT,SAAS,CAACE,KAAK,GAAG,KAAK;MACzB;MAEA,SAASY,SAASA,CAAA,EAAG;QACnB;QACAH,QAAQ,CAACC,aAAa,GAAG,YAAY;UACnC,OAAO,KAAK;QACd,CAAC;QACDZ,SAAS,CAACE,KAAK,GAAG,IAAI;QACtBS,QAAQ,CAACI,gBAAgB,CAAC,WAAW,EAAEV,SAAS,CAAC;QACjDM,QAAQ,CAACI,gBAAgB,CAAC,SAAS,EAAEN,OAAO,CAAC;MAC/C;MACAZ,WAAW,CAACK,KAAK,CAACa,gBAAgB,CAAC,WAAW,EAAED,SAAS,CAAC;IAC5D;IACA5B,SAAS,CAAC,MAAM;MACdkB,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}