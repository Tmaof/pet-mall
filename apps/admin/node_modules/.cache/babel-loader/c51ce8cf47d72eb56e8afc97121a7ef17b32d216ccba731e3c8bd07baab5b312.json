{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withModifiers as _withModifiers, withCtx as _withCtx, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vShow as _vShow, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SvgIcon = _resolveComponent(\"SvgIcon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_popover = _resolveComponent(\"el-popover\");\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"page-seach-container\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers(() => {}, [\"stop\"]))\n  }, [$setup.isSeach ? (_openBlock(), _createBlock(_component_el_popover, {\n    key: 0,\n    visible: $setup.isShowRes,\n    width: \"auto\"\n  }, {\n    reference: _withCtx(() => [_createVNode(_component_el_input, {\n      ref: \"inputRef\",\n      modelValue: $setup.searchValue,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchValue = $event),\n      modelModifiers: {\n        trim: true\n      },\n      onInput: $setup.onInputChange,\n      onClick: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"stop\"]))\n    }, {\n      suffix: _withCtx(() => [_createVNode(_component_SvgIcon, {\n        icon: \"my-seach\",\n        onClick: $setup.onIptBlur,\n        title: _ctx.$t('PageSearch.index.961440-0')\n      }, null, 8 /* PROPS */, [\"title\"])]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"])]),\n    default: _withCtx(() => [_createElementVNode(\"ul\", {\n      class: \"search-list\",\n      onClick: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"stop\"]))\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.resList, item => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: item.item.path\n      }, [_createVNode(_component_router_link, {\n        to: item.item.path\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(item.item.title), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])]);\n    }), 128 /* KEYED_FRAGMENT */)), _withDirectives(_createElementVNode(\"li\", null, _toDisplayString(_ctx.$t('PageSearch.index.961440-1')), 513 /* TEXT, NEED_PATCH */), [[_vShow, !$setup.resList.length]])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"])) : (_openBlock(), _createBlock(_component_SvgIcon, {\n    key: 1,\n    icon: \"my-seach\",\n    onClick: $setup.onSeach,\n    title: _ctx.$t('PageSearch.index.961440-2')\n  }, null, 8 /* PROPS */, [\"title\"]))]);\n}","map":{"version":3,"names":["_createElementBlock","class","onClick","_cache","_withModifiers","$setup","isSeach","_createBlock","_component_el_popover","key","visible","isShowRes","width","reference","_withCtx","_createVNode","_component_el_input","ref","modelValue","searchValue","$event","modelModifiers","trim","onInput","onInputChange","suffix","_component_SvgIcon","icon","onIptBlur","title","_ctx","$t","_","default","_createElementVNode","_Fragment","_renderList","resList","item","path","_component_router_link","to","_createTextVNode","_toDisplayString","length","onSeach"],"sources":["D:\\myproject\\毕业设计\\pet-mall\\apps\\admin\\src\\components\\PageSearch\\index.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-seach-container\" @click.stop>\r\n    <el-popover :visible=\"isShowRes\" v-if=\"isSeach\" width=\"auto\">\r\n      <template #reference>\r\n        <el-input\r\n          ref=\"inputRef\"\r\n          v-model.trim=\"searchValue\"\r\n          @input=\"onInputChange\"\r\n          @click.stop\r\n        >\r\n          <template #suffix>\r\n            <SvgIcon\r\n              icon=\"my-seach\"\r\n              @click=\"onIptBlur\"\r\n              :title=\"$t('PageSearch.index.961440-0')\"\r\n            ></SvgIcon>\r\n          </template>\r\n        </el-input>\r\n      </template>\r\n      <!-- 搜索结果 -->\r\n      <template #default>\r\n        <ul class=\"search-list\" @click.stop>\r\n          <li v-for=\"item of resList\" :key=\"item.item.path\">\r\n            <router-link :to=\"item.item.path\">{{\r\n              item.item.title\r\n            }}</router-link>\r\n          </li>\r\n          <li v-show=\"!resList.length\">\r\n            {{ $t('PageSearch.index.961440-1') }}\r\n          </li>\r\n        </ul>\r\n      </template>\r\n    </el-popover>\r\n    <SvgIcon\r\n      v-else\r\n      icon=\"my-seach\"\r\n      @click=\"onSeach\"\r\n      :title=\"$t('PageSearch.index.961440-2')\"\r\n    ></SvgIcon>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, nextTick } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport getFuse from './fuse'\r\nconst store = useStore()\r\nconst routes = store.getters.routes\r\nconst fuse = getFuse(routes)\r\nconst isSeach = ref(false)\r\nconst inputRef = ref({})\r\nconst searchValue = ref('')\r\nconst resList = ref([])\r\nconst isShowRes = ref(false)\r\n// 点击搜索按钮\r\nfunction onSeach() {\r\n  isSeach.value = true\r\n  nextTick(() => {\r\n    inputRef.value.focus()\r\n  })\r\n  // 点击页面其他部分时，也关闭搜索框\r\n  // 点击搜索框时，需要阻止事件冒泡\r\n  document.addEventListener('click', onIptBlur)\r\n}\r\n// 关闭输入框\r\nfunction onIptBlur() {\r\n  isSeach.value = false\r\n  isShowRes.value = false\r\n  searchValue.value = '' // 清空输入\r\n  document.removeEventListener('click', onIptBlur)\r\n}\r\n// 输入内容改变\r\nfunction onInputChange(value) {\r\n  isShowRes.value = true\r\n  resList.value = fuse.value.search(value)\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n//el-popover元素被element-plus注入到了最外层的html中想要修改其插槽元素(.search-list)的样式则不能声明scoped\r\n\r\n.page-seach-container {\r\n  display: flex;\r\n}\r\n.search-list {\r\n  width: 100%;\r\n  font-size: 1.2em;\r\n  li {\r\n    display: flex;\r\n    justify-content: center;\r\n    border-bottom: 1px solid gainsboro;\r\n    margin-bottom: 5px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;;;;;uBACEA,mBAAA,CAsCM;IAtCDC,KAAK,EAAC,sBAAsB;IAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAD1CC,cAAA,CACoC,QAAW;MACJC,MAAA,CAAAC,OAAO,I,cAA9CC,YAAA,CA8BaC,qBAAA;IAhCjBC,GAAA;IAEiBC,OAAO,EAAEL,MAAA,CAAAM,SAAS;IAAiBC,KAAK,EAAC;;IACzCC,SAAS,EAAAC,QAAA,CAClB,MAaW,CAbXC,YAAA,CAaWC,mBAAA;MAZTC,GAAG,EAAC,UAAU;MALxBC,UAAA,EAMwBb,MAAA,CAAAc,WAAW;MANnC,uBAAAhB,MAAA,QAAAA,MAAA,MAAAiB,MAAA,IAMwBf,MAAA,CAAAc,WAAW,GAAAC,MAAA;MANnCC,cAAA,EAMU;QAAAC,IAAA;MAAA,CAA0B;MACzBC,OAAK,EAAElB,MAAA,CAAAmB,aAAa;MACpBtB,OAAK,EAAAC,MAAA,QAAAA,MAAA,MARhBC,cAAA,CAQU,QAAW;;MAEAqB,MAAM,EAAAX,QAAA,CACf,MAIW,CAJXC,YAAA,CAIWW,kBAAA;QAHTC,IAAI,EAAC,UAAU;QACdzB,OAAK,EAAEG,MAAA,CAAAuB,SAAS;QAChBC,KAAK,EAAEC,IAAA,CAAAC,EAAE;;MAdxBC,CAAA;;IAoBiBC,OAAO,EAAAnB,QAAA,CAChB,MASK,CATLoB,mBAAA,CASK;MATDjC,KAAK,EAAC,aAAa;MAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MArBtCC,cAAA,CAqBgC,QAAW;2BACjCJ,mBAAA,CAIKmC,SAAA,QA1BfC,WAAA,CAsB6B/B,MAAA,CAAAgC,OAAO,EAAfC,IAAI;2BAAftC,mBAAA,CAIK;QAJwBS,GAAG,EAAE6B,IAAI,CAACA,IAAI,CAACC;UAC1CxB,YAAA,CAEgByB,sBAAA;QAFFC,EAAE,EAAEH,IAAI,CAACA,IAAI,CAACC;;QAvBxCN,OAAA,EAAAnB,QAAA,CAuB8C,MAEhC,CAzBd4B,gBAAA,CAAAC,gBAAA,CAwBcL,IAAI,CAACA,IAAI,CAACT,KAAK,iB;QAxB7BG,CAAA;;oDA2BUE,mBAAA,CAEK,YAAAS,gBAAA,CADAb,IAAA,CAAAC,EAAE,8D,UADM1B,MAAA,CAAAgC,OAAO,CAACO,MAAM,E;IA3BrCZ,CAAA;mDAiCIzB,YAAA,CAKWmB,kBAAA;IAtCfjB,GAAA;IAmCMkB,IAAI,EAAC,UAAU;IACdzB,OAAK,EAAEG,MAAA,CAAAwC,OAAO;IACdhB,KAAK,EAAEC,IAAA,CAAAC,EAAE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}