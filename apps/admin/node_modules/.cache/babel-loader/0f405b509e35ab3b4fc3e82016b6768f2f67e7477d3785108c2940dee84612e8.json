{"ast":null,"code":"import i18n from '@/i18n';\nimport { computed, ref } from 'vue';\nimport { addRole } from '@/api/role-manage';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'index',\n  props: {\n    modelValue: {\n      required: true,\n      type: Boolean\n    }\n  },\n  emits: ['update:modelValue', 'complete'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const {\n      getters\n    } = useStore();\n    const props = __props;\n    const isShow = computed({\n      get() {\n        return props.modelValue;\n      },\n      set(val) {\n        emit('update:modelValue', val);\n      }\n    });\n    const emit = __emit;\n    const form = ref({\n      name: '',\n      describe: ''\n    });\n    const rules = {\n      name: [{\n        required: true,\n        message: i18n.$t('AddRole.index.017835-6'),\n        trigger: 'blur'\n      }]\n    };\n    const formRef = ref();\n    const loading = ref(false);\n    function resetInfo() {\n      form.value = {};\n    }\n    async function addRoleInfo() {\n      loading.value = true;\n      formRef.value.validate(ok => {\n        if (ok) {\n          addRole(form.value).then(() => {\n            isShow.value = false;\n            emit('complete');\n          });\n        }\n        loading.value = false;\n      });\n    }\n    const __returned__ = {\n      getters,\n      props,\n      isShow,\n      emit,\n      form,\n      rules,\n      formRef,\n      loading,\n      resetInfo,\n      addRoleInfo,\n      get i18n() {\n        return i18n;\n      },\n      computed,\n      ref,\n      get addRole() {\n        return addRole;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["i18n","computed","ref","addRole","useStore","getters","props","__props","isShow","get","modelValue","set","val","emit","__emit","form","name","describe","rules","required","message","$t","trigger","formRef","loading","resetInfo","value","addRoleInfo","validate","ok","then"],"sources":["D:/myproject/毕业设计/pet-mall/apps/admin/src/views/Acl/Role/components/AddRole/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog\r\n      v-model=\"isShow\"\r\n      :title=\"$t('AddRole.index.017835-0')\"\r\n      @closed=\"resetInfo\"\r\n      :fullscreen=\"getters.isMobile\"\r\n    >\r\n      <el-form ref=\"formRef\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-form-item :label=\"$t('AddRole.index.017835-1')\" prop=\"name\">\r\n          <el-input\r\n            :placeholder=\"$t('AddRole.index.017835-2')\"\r\n            v-model.trim=\"form.name\"\r\n            @keydown.enter=\"addRoleInfo\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('AddRole.index.017835-3')\">\r\n          <el-input\r\n            :placeholder=\"$t('AddRole.index.017835-4')\"\r\n            v-model.trim=\"form.describe\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"right-btn-container\">\r\n        <el-button type=\"primary\" @click=\"addRoleInfo\" :loading=\"loading\"\r\n          >{{ $t('AddRole.index.017835-5') }}\r\n          <template #loading>\r\n            <el-icon><Loading /></el-icon>\r\n          </template>\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport i18n from '@/i18n'\r\nimport { defineEmits, defineProps, computed, ref } from 'vue'\r\nimport { addRole } from '@/api/role-manage'\r\nimport { useStore } from 'vuex'\r\nconst { getters } = useStore()\r\nconst props = defineProps({\r\n  modelValue: {\r\n    required: true,\r\n    type: Boolean\r\n  }\r\n})\r\nconst isShow = computed({\r\n  get() {\r\n    return props.modelValue\r\n  },\r\n  set(val) {\r\n    emit('update:modelValue', val)\r\n  }\r\n})\r\nconst emit = defineEmits(['update:modelValue', 'complete'])\r\nconst form = ref({\r\n  name: '',\r\n  describe: ''\r\n})\r\nconst rules = {\r\n  name: [{ required: true, message: i18n.$t('AddRole.index.017835-6'), trigger: 'blur' }]\r\n}\r\nconst formRef = ref()\r\nconst loading = ref(false)\r\nfunction resetInfo() {\r\n  form.value = {}\r\n}\r\n\r\nasync function addRoleInfo() {\r\n  loading.value = true\r\n\r\n  formRef.value.validate((ok) => {\r\n    if (ok) {\r\n      addRole(form.value).then(() => {\r\n        isShow.value = false\r\n        emit('complete')\r\n      })\r\n    }\r\n    loading.value = false\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.right-btn-container {\r\n  display: flex;\r\n  justify-content: right;\r\n}\r\n</style>\r\n"],"mappings":"AAoCA,OAAOA,IAAI,MAAM,QAAQ;AACzB,SAAmCC,QAAQ,EAAEC,GAAG,QAAQ,KAAK;AAC7D,SAASC,OAAO,QAAQ,mBAAmB;AAC3C,SAASC,QAAQ,QAAQ,MAAM;;;;;;;;;;;;;;;IAC/B,MAAM;MAAEC;IAAQ,CAAC,GAAGD,QAAQ,CAAC,CAAC;IAC9B,MAAME,KAAK,GAAGC,OAKZ;IACF,MAAMC,MAAM,GAAGP,QAAQ,CAAC;MACtBQ,GAAGA,CAAA,EAAG;QACJ,OAAOH,KAAK,CAACI,UAAU;MACzB,CAAC;MACDC,GAAGA,CAACC,GAAG,EAAE;QACPC,IAAI,CAAC,mBAAmB,EAAED,GAAG,CAAC;MAChC;IACF,CAAC,CAAC;IACF,MAAMC,IAAI,GAAGC,MAA8C;IAC3D,MAAMC,IAAI,GAAGb,GAAG,CAAC;MACfc,IAAI,EAAE,EAAE;MACRC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACF,MAAMC,KAAK,GAAG;MACZF,IAAI,EAAE,CAAC;QAAEG,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAEpB,IAAI,CAACqB,EAAE,CAAC,wBAAwB,CAAC;QAAEC,OAAO,EAAE;MAAO,CAAC;IACxF,CAAC;IACD,MAAMC,OAAO,GAAGrB,GAAG,CAAC,CAAC;IACrB,MAAMsB,OAAO,GAAGtB,GAAG,CAAC,KAAK,CAAC;IAC1B,SAASuB,SAASA,CAAA,EAAG;MACnBV,IAAI,CAACW,KAAK,GAAG,CAAC,CAAC;IACjB;IAEA,eAAeC,WAAWA,CAAA,EAAG;MAC3BH,OAAO,CAACE,KAAK,GAAG,IAAI;MAEpBH,OAAO,CAACG,KAAK,CAACE,QAAQ,CAAEC,EAAE,IAAK;QAC7B,IAAIA,EAAE,EAAE;UACN1B,OAAO,CAACY,IAAI,CAACW,KAAK,CAAC,CAACI,IAAI,CAAC,MAAM;YAC7BtB,MAAM,CAACkB,KAAK,GAAG,KAAK;YACpBb,IAAI,CAAC,UAAU,CAAC;UAClB,CAAC,CAAC;QACJ;QACAW,OAAO,CAACE,KAAK,GAAG,KAAK;MACvB,CAAC,CAAC;IACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}